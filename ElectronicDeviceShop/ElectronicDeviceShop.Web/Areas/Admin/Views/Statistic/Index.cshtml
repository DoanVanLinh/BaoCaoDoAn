@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<!--<div class="main-content-container container-fluid px-4">-->
<!-- Default Filter -->
<!--<div class="row">
    <div class="col">
        <div class="card card-small mb-4 mt-5">
            <div class="card-header row no-gutters py-4 d-flex justify-content-between fw-bold col-12">
            </div>
            <div class="card-header p-0 text-center align-middle table-responsive-lg">
                <table class="table mb-0 ">
                    <thead class="bg-light ">
                        <tr>
                            <th class="border-0">
                                <div class="form-group">
                                    <label for="Categories" class="fw-bold ">Danh mục</label>
                                    <select id="Categories" class="form-control form-control-lg">
                                        <option selected="">Máy giặt</option>
                                        <option>TV</option>
                                    </select>
                                    <div class="valid-feedback "></div>
                                </div>
                            </th>
                            <th class="border-0">
                                <div class="form-group">
                                    <label for="Supplier" class="fw-bold ">Nhà cung cấp</label>
                                    <select id="Supplier" class="form-control form-control-lg">
                                        <option selected="">Sam Sung</option>
                                        <option>LG</option>
                                        <option>Toshiba</option>
                                    </select>
                                    <div class="valid-feedback "></div>
                                </div>
                            </th>
                            <th class="border-0">
                                <div class="form-group">
                                    <label for="options" class="fw-bold ">Tiêu chí</label>
                                    <select id="options" class="form-control form-control-lg">
                                        <option selected="">Bán chạy</option>
                                        <option>Bán ít</option>
                                    </select>
                                    <div class="valid-feedback "></div>
                                </div>
                            </th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div class="card-footer row no-gutters py-4 d-flex  flex-row-reverse fw-bold col-12">
                <button type="button" class="col-sm-6 col-md-2 col-lg-1 mb-2 btn btn-lg btn-success mr-1" data-bs-toggle="modal" data-bs-target="#modal-add"><i class="fas fa-plus "></i></button>
            </div>
        </div>
    </div>
</div>-->
<!-- End Default Light Table -->
<!-- Default Light Table -->
<!--<div class="row">
    <div class="col">
        <div class="card card-small mb-4 mt-5">
            <div class="card-header row no-gutters py-4 d-flex justify-content-between fw-bold col-12">
            </div>
            <div class="card-body p-0 text-center align-middle table-responsive-lg">
                <table class="table mb-0 ">
                    <thead class="bg-light ">
                        <tr>
                            <th class="border-0">#</th>
                            <th class="border-0">First Name</th>
                            <th class="border-0">Last Name</th>
                            <th class="border-0">Country</th>
                            <th class="border-0">Phone</th>
                            <th class="border-0">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="align-middle ">1</td>
                            <td class="align-middle ">Ali</td>
                            <td class="align-middle ">Kerry</td>
                            <td class="align-middle ">Russian Federation</td>
                            <td class="align-middle ">Gdańsk</td>
                            <td class="align-middle d-flex justify-content-center ">
                                <button type="button" class="btn btn-lg btn-info mr-1" data-bs-toggle="modal" data-bs-target="#modal-detail"><i class="fas fa-eye"></i></button>
                            </td>
                        </tr>
                        <tr>
                            <td class="align-middle ">1</td>
                            <td class="align-middle ">Ali</td>
                            <td class="align-middle ">Kerry</td>
                            <td class="align-middle ">Russian Federation</td>
                            <td class="align-middle ">Gdańsk</td>
                            <td class="align-middle d-flex justify-content-center ">
                                <button type="button" class=" btn btn-lg btn-info mr-1 "><i class="fas fa-eye "></i></button>
                            </td>
                        </tr>
                        <tr>
                            <td class="align-middle ">1</td>
                            <td class="align-middle ">Ali</td>
                            <td class="align-middle ">Kerry</td>
                            <td class="align-middle ">Russian Federation</td>
                            <td class="align-middle ">Gdańsk</td>
                            <td class="align-middle d-flex justify-content-center ">
                                <button type="button" class=" btn btn-lg btn-info mr-1 "><i class="fas fa-eye "></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="card-footer col no-gutters py-4 d-flex flex-column text-center fw-bold col-12 border-top">
                <div class="dataTables_info" id="dt-material-checkbox_info" role="status" aria-live="polite">Showing 1 to 10 of 57 entries</div>
                <div class="dataTables_paginate paging_simple_numbers d-flex justify-content-center" id="dt-material-checkbox_paginate">
                    <ul class="pagination">
                        <li class="paginate_button page-item previous disabled" id="dt-material-checkbox_previous"><a href="#" aria-controls="dt-material-checkbox" data-dt-idx="0" tabindex="0" class="page-link waves-effect waves-effect">Previous</a></li>
                        <li class="paginate_button page-item active"><a href="#" aria-controls="dt-material-checkbox" data-dt-idx="1" tabindex="0" class="page-link waves-effect waves-effect">1</a></li>
                        <li class="paginate_button page-item "><a href="#" aria-controls="dt-material-checkbox" data-dt-idx="2" tabindex="0" class="page-link waves-effect waves-effect">2</a></li>
                        <li class="paginate_button page-item "><a href="#" aria-controls="dt-material-checkbox" data-dt-idx="3" tabindex="0" class="page-link waves-effect waves-effect">3</a></li>
                        <li class="paginate_button page-item "><a href="#" aria-controls="dt-material-checkbox" data-dt-idx="4" tabindex="0" class="page-link waves-effect waves-effect">4</a></li>
                        <li class="paginate_button page-item "><a href="#" aria-controls="dt-material-checkbox" data-dt-idx="5" tabindex="0" class="page-link waves-effect waves-effect">5</a></li>
                        <li class="paginate_button page-item "><a href="#" aria-controls="dt-material-checkbox" data-dt-idx="6" tabindex="0" class="page-link waves-effect waves-effect">6</a></li>
                        <li class="paginate_button page-item next" id="dt-material-checkbox_next">
                            <a href="#" aria-controls="dt-material-checkbox" data-dt-idx="7" tabindex="0" class="page-link waves-effect waves-effect">Next</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>-->
<!-- End Default Light Table -->
<!-- Modal -->
<!--<div class="modal" id="modal-detail" tabindex="-1 " role="dialog" aria-labelledby="mediumModalLabel " aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered " role="document">
            <div class="modal-content ">
                <div class="modal-header p-3">
                    <div class="col-10 border-bottom-0 ">
                        <h3 class="page-title">Chi tiết Sản phẩm</h3>
                    </div>
                    <button type="button" class="close btn-lg" data-bs-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body p-3 d-flex flex-column">
                    <div class="rounded mx-auto d-block" style="background-image: url('images/content-management/1.jpeg');height: 250px">
                        <img src="https://kimnganadv.com/wp-content/uploads/2018/07/samsung-logo-png-blue-samsung-logo-png-1288-1641.png" alt="" class="rounded bg-light float-right p-1 m-3" width="100">
                    </div>
                    <div class="card-body p-0">
                        <table class="table table-bordered" style="table-layout: fixed;">
                            <tr>
                                <th class="col-3" tyle="word-wrap: break-word;">1</th>
                                <td style="word-wrap: break-word;">MarMaMarMarkMarkMarkMarkMarkMarkMarkMarkMarkkMarMarkMarkMarkMarkMarkMarkMarkMarkMarkkMarMarkMarkMarkMarkMarkMarkMarkMarkMarkkMarMarkMarkMarkMarkMarkMarkMarkMarkMarkkMarMarkMarkMarkMarkMarkMarkMarkMarkMarkkrkMarkMarkMarkMarkMarkMarkMarkMarkk</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                            <tr>
                                <th>1</th>
                                <td>Mark</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class=" btn btn-danger btn-lg me-md-2" data-bs-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>
</div>-->


<div class="main-content-container container-fluid px-4">
    <!-- Page Header -->
    <div class="page-header row no-gutters py-4">
        <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
            <h3 class="page-title">Thống Kê Cửa Hàng</h3>
        </div>
    </div>
    <!-- End Page Header -->
    <!-- Small Stats Blocks -->
    <div class="row" id="">
        <div class="col-12 mb-4">
            <div class="stats-small stats-small--1 card card-small">
                <div class="card-body p-0 d-flex">
                    <div class="d-flex flex-column m-auto">
                        <div class="stats-small__data text-center">
                            <span class="stats-small__label text-uppercase">Tổng Doanh Thu</span>
                            <h1 class="stats-small__value count my-3" id="AllShare" style="font-size: xxx-large;"></h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="AllProductByCategory">
        @*DATA PRODUCT*@
    </div>
    <!-- End Small Stats Blocks -->
    <div class="row">
        <!-- Users Stats -->
        <div class="col-lg-8 col-md-12 col-sm-12 mb-4">
            <div class="card card-small">
                <div class="card-header border-bottom">
                    <h6 class="m-0">Doanh Thu Trong Năm</h6>
                </div>
                <div class="card-body pt-0">
                    <div class="chartjs-size-monitor" style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
                    <div class="row border-bottom py-2 bg-light d-flex justify-content-end">
                        <div class="col-12 col-sm-6 d-flex mb-2 mb-sm-0">
                            <button type="button" class="btn btn-sm btn-white ml-auto mr-auto ml-sm-auto mr-sm-0 mt-3 mt-sm-0">View Full Report →</button>
                        </div>
                    </div>
                    <canvas id="lineChart"></canvas>
                </div>
            </div>
        </div>
        <!-- End Users Stats -->
        <!-- Users By Device Stats -->
        <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
            <div class="card card-small h-100">
                <div class="card-header border-bottom">
                    <h6 class="m-0">Thống Kê Theo Danh Mục</h6>
                </div>
                <div class="card-body d-flex justify-content-center align-items-center">
                    <canvas id="pieChart" style="max-width: 5000px;"></canvas>
                </div>
                <div class="card-footer border-top">
                    <div class="row">
                        <div class="col">
                            <select class="custom-select custom-select-sm" style="max-width: 130px;">
                                <option selected="">Last Week</option>
                                <option value="1">Today</option>
                                <option value="2">Last Month</option>
                                <option value="3">Last Year</option>
                            </select>
                        </div>
                        <div class="col text-right view-report">
                            <a href="#">Full report →</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Users By Device Stats -->
        <!-- New Draft Component -->
        <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
            <!-- Quick Post -->
            <div class="card card-small h-100">
                <div class="card-header border-bottom">
                    <h6 class="m-0">New Draft</h6>
                </div>
                <div class="card-body d-flex flex-column">
                    <form class="quick-post-form">
                        <div class="form-group">
                            <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Brave New World">
                        </div>
                        <div class="form-group">
                            <textarea class="form-control" placeholder="Words can be like X-rays if you use them properly..."></textarea>
                        </div>
                        <div class="form-group mb-0">
                            <button type="submit" class="btn btn-accent">Create Draft</button>
                        </div>
                    </form>
                </div>
            </div>
            <!-- End Quick Post -->
        </div>
        <!-- End New Draft Component -->
        <!-- Discussions Component -->
        <div class="col-lg-5 col-md-12 col-sm-12 mb-4">
            <div class="card card-small blog-comments">
                <div class="card-header border-bottom">
                    <h6 class="m-0">Discussions</h6>
                </div>
                <div class="card-body p-0">
                    <div class="blog-comments__item d-flex p-3">
                        <div class="blog-comments__avatar mr-3">
                            <img src="images/avatars/1.jpg" alt="User avatar">
                        </div>
                        <div class="blog-comments__content">
                            <div class="blog-comments__meta text-muted">
                                <a class="text-secondary" href="#">James Johnson</a> on
                                <a class="text-secondary" href="#">Hello World!</a>
                                <span class="text-muted">– 3 days ago</span>
                            </div>
                            <p class="m-0 my-1 mb-2 text-muted">Well, the way they make shows is, they make one show ...</p>
                            <div class="blog-comments__actions">
                                <div class="btn-group btn-group-sm">
                                    <button type="button" class="btn btn-white">
                                        <span class="text-success">
                                            <i class="material-icons">check</i>
                                        </span> Approve
                                    </button>
                                    <button type="button" class="btn btn-white">
                                        <span class="text-danger">
                                            <i class="material-icons">clear</i>
                                        </span> Reject
                                    </button>
                                    <button type="button" class="btn btn-white">
                                        <span class="text-light">
                                            <i class="material-icons">more_vert</i>
                                        </span> Edit
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="blog-comments__item d-flex p-3">
                        <div class="blog-comments__avatar mr-3">
                            <img src="images/avatars/2.jpg" alt="User avatar">
                        </div>
                        <div class="blog-comments__content">
                            <div class="blog-comments__meta text-muted">
                                <a class="text-secondary" href="#">James Johnson</a> on
                                <a class="text-secondary" href="#">Hello World!</a>
                                <span class="text-muted">– 4 days ago</span>
                            </div>
                            <p class="m-0 my-1 mb-2 text-muted">After the avalanche, it took us a week to climb out. Now...</p>
                            <div class="blog-comments__actions">
                                <div class="btn-group btn-group-sm">
                                    <button type="button" class="btn btn-white">
                                        <span class="text-success">
                                            <i class="material-icons">check</i>
                                        </span> Approve
                                    </button>
                                    <button type="button" class="btn btn-white">
                                        <span class="text-danger">
                                            <i class="material-icons">clear</i>
                                        </span> Reject
                                    </button>
                                    <button type="button" class="btn btn-white">
                                        <span class="text-light">
                                            <i class="material-icons">more_vert</i>
                                        </span> Edit
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="blog-comments__item d-flex p-3">
                        <div class="blog-comments__avatar mr-3">
                            <img src="images/avatars/3.jpg" alt="User avatar">
                        </div>
                        <div class="blog-comments__content">
                            <div class="blog-comments__meta text-muted">
                                <a class="text-secondary" href="#">James Johnson</a> on
                                <a class="text-secondary" href="#">Hello World!</a>
                                <span class="text-muted">– 5 days ago</span>
                            </div>
                            <p class="m-0 my-1 mb-2 text-muted">My money's in that office, right? If she start giving me...</p>
                            <div class="blog-comments__actions">
                                <div class="btn-group btn-group-sm">
                                    <button type="button" class="btn btn-white">
                                        <span class="text-success">
                                            <i class="material-icons">check</i>
                                        </span> Approve
                                    </button>
                                    <button type="button" class="btn btn-white">
                                        <span class="text-danger">
                                            <i class="material-icons">clear</i>
                                        </span> Reject
                                    </button>
                                    <button type="button" class="btn btn-white">
                                        <span class="text-light">
                                            <i class="material-icons">more_vert</i>
                                        </span> Edit
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-footer border-top">
                    <div class="row">
                        <div class="col text-center view-report">
                            <button type="submit" class="btn btn-white">View All Comments</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Discussions Component -->
        <!-- Top Referrals Component -->
        <div class="col-lg-3 col-md-12 col-sm-12 mb-4">
            <div class="card card-small">
                <div class="card-header border-bottom">
                    <h6 class="m-0">Top Referrals</h6>
                </div>
                <div class="card-body p-0">
                    <ul class="list-group list-group-small list-group-flush">
                        <li class="list-group-item d-flex px-3">
                            <span class="text-semibold text-fiord-blue">GitHub</span>
                            <span class="ml-auto text-right text-semibold text-reagent-gray">19,291</span>
                        </li>
                        <li class="list-group-item d-flex px-3">
                            <span class="text-semibold text-fiord-blue">Stack Overflow</span>
                            <span class="ml-auto text-right text-semibold text-reagent-gray">11,201</span>
                        </li>
                        <li class="list-group-item d-flex px-3">
                            <span class="text-semibold text-fiord-blue">Hacker News</span>
                            <span class="ml-auto text-right text-semibold text-reagent-gray">9,291</span>
                        </li>
                        <li class="list-group-item d-flex px-3">
                            <span class="text-semibold text-fiord-blue">Reddit</span>
                            <span class="ml-auto text-right text-semibold text-reagent-gray">8,281</span>
                        </li>
                        <li class="list-group-item d-flex px-3">
                            <span class="text-semibold text-fiord-blue">The Next Web</span>
                            <span class="ml-auto text-right text-semibold text-reagent-gray">7,128</span>
                        </li>
                        <li class="list-group-item d-flex px-3">
                            <span class="text-semibold text-fiord-blue">Tech Crunch</span>
                            <span class="ml-auto text-right text-semibold text-reagent-gray">6,218</span>
                        </li>
                        <li class="list-group-item d-flex px-3">
                            <span class="text-semibold text-fiord-blue">YouTube</span>
                            <span class="ml-auto text-right text-semibold text-reagent-gray">1,218</span>
                        </li>
                        <li class="list-group-item d-flex px-3">
                            <span class="text-semibold text-fiord-blue">Adobe</span>
                            <span class="ml-auto text-right text-semibold text-reagent-gray">827</span>
                        </li>
                    </ul>
                </div>
                <div class="card-footer border-top">
                    <div class="row">
                        <div class="col">
                            <select class="custom-select custom-select-sm">
                                <option selected="">Last Week</option>
                                <option value="1">Today</option>
                                <option value="2">Last Month</option>
                                <option value="3">Last Year</option>
                            </select>
                        </div>
                        <div class="col text-right view-report">
                            <a href="#">Full report →</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Top Referrals Component -->
    </div>
</div>

@section Script{
    <script>
        let allCategory = [];
        let allSellProductByCategory = [];
        let amount = new Intl.NumberFormat({ style: 'currency', currency: 'VND' });

        $(document).ready(function () {
            GetAllCategory();
            GetAllProDuctByCategory();
            GetAllShareOfYear();
        });
        function GetAllCategory() {
            $.ajax({
                url: "/Statistic/GetAllCategory",
                type: "GET",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (result) {
                    $.each(result.cateAmount, function (key, item) {
                        allCategory.push(key);
                        allSellProductByCategory.push(item);
                        $("#AllShare").text(amount.format(result.allShare)+" đ");
                    });
                },
                error: function (errormessage) {
                    toastr.error(errormessage.responseText);
                }
            });
        }
        var ctxP = document.getElementById("pieChart").getContext('2d');
        var myPieChart = new Chart(ctxP, {
            type: 'pie',
            data: {
                labels: allCategory,
                datasets: [{
                    data: allSellProductByCategory,
                    backgroundColor: ["#F7464A", "#46BFBD", "#FDB45C", "#949FB1", "#4D5360"],
                    hoverBackgroundColor: ["#FF5A5E", "#5AD3D1", "#FFC870", "#A8B3C5", "#616774"]
                }]
            },
            options: {
                responsive: true
            }
        });
        function GetAllProDuctByCategory() {
            $.ajax({
                url: "/Statistic/GetAllProDuctByCategory",
                type: "GET",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (result) {
                    var html = '';
                    $.each(result, function (key, item) {

                        html += ' <div class="col-lg col-md-6 col-sm-6 mb-4">';
                        html += ' <div class="stats-small stats-small--1 card card-small">';
                        html += ' <div class="card-body p-0 d-flex">';
                        html += ' <div class="d-flex flex-column m-auto">';
                        html += ' <div class="stats-small__data text-center">';
                        html += ' <span class="stats-small__label text-uppercase">' + item.category + '</span>';
                        html += ' <h6 class="stats-small__value count my-3">' + amount.format(item.amount) + '</h6>';
                        html += ' </div>';
                        html += ' </div>';
                        html += ' </div>';
                        html += ' </div>';
                        html += ' </div>';

                    });
                    $("#AllProductByCategory").html(html);
                },
                error: function (errormessage) {
                    toastr.error(errormessage.responseText);
                }
            });
        }

        var allMonth = [];
        var sharePerMonth = [];
        function GetAllShareOfYear() {
            $.ajax({
                url: "/Statistic/GetAllShareOfYear",
                type: "GET",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (result) {
                    $.each(result, function (key, item) {
                        allMonth.push(key);
                        sharePerMonth.push(item);
                    });
                },
                error: function (errormessage) {
                    toastr.error(errormessage.responseText);
                }
            });
        }
        //line
        var ctxL = document.getElementById("lineChart").getContext('2d');
        var myLineChart = new Chart(ctxL, {
            type: 'line',
            data: {
                labels: allMonth,
                datasets: [{
                    label: "Doanh thu theo tháng",
                    data: sharePerMonth,
                    backgroundColor: [
                        'rgba(0, 255, 0, .2)',
                    ],
                    borderColor: [
                        'rgba(0, 255, 0, .7)',
                    ],
                    borderWidth: 2
                }
                ]
            },
            options: {
                responsive: true
            }
        });
    </script>
}
